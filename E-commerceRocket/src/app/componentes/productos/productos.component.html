<div class="container-fluid mt-4" style="width: 95%;">
  <h2 class="mb-3">Productos</h2>


  <div class="d-flex justify-content-between mb-3">
    <button (click)="toggleForm()" class="btn btn-success">
      <i class="fa-solid fa-plus"></i> Registrar Producto
    </button>
  </div>


  <table class="table table-striped table-bordered mt-3">
    <thead class="table-dark text-center">
      <tr>
        <th scope="col">#</th>
        <th scope="col">Nombre</th>
        <th scope="col">Descripción</th>
        <th scope="col">Precio</th>
        <th scope="col">Stock</th>
        <th scope="col" *ngIf="muestraAcciones">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let producto of productos; let i = index" class="text-center align-middle">
        <td>{{ i + 1 }}</td>
        <td hidden>{{ producto.id }}</td>
        <td>{{ producto.nombre }}</td>
        <td>{{ producto.descripcion }}</td>
        <td>{{ producto.precio | currency:'MX ':'symbol' }}</td>
        <td>{{ producto.stock }}</td>
        <td *ngIf="muestraAcciones">
          <button class="btn btn-primary btn-sm me-1" (click)="editProducto(producto)">
            <i class="fa fa-edit"></i> Editar
          </button>
          <button class="btn btn-danger btn-sm ms-1" (click)="deleteProducto(producto.id)">
            <i class="fa fa-trash"></i> Eliminar
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="showForm" class="card card-body mt-4">
    <h4>{{ textoModal }}</h4>
    <form [formGroup]="productoForm" (ngSubmit)="onSubmit()">
      <input type="hidden" readonly formControlName="id">

      <div class="mb-3">
        <label for="nombre" class="form-label">Nombre</label>
        <input id="nombre" class="form-control" formControlName="nombre" maxlength="30">
      </div>

      <div class="mb-3">
        <label for="descripcion" class="form-label">Descripción</label>
        <input id="descripcion" class="form-control" formControlName="descripcion" maxlength="150">
      </div>

      <div class="mb-3">
        <label for="precio" class="form-label">Precio</label>
        <input id="precio" type="number" class="form-control" formControlName="precio" min="1">
      </div>

      <div class="mb-3">
        <label for="stock" class="form-label">Stock</label>
        <input id="stock" type="number" class="form-control" formControlName="stock" min="1">
      </div>

      <div class="text-end">
        <button type="submit" class="btn btn-success me-2" [disabled]="productoForm.invalid">
          <i class="fa fa-save"></i> Guardar
        </button>
        <button type="button" class="btn btn-secondary" (click)="resetForm()">
          <i class="fa fa-times"></i> Cancelar
        </button>
      </div>
    </form>
  </div>
</div>