
<div class="container-fluid mt-4" style="width: 95%;">
    <h2>Gestión de Usuarios</h2>
<div class="d-flex justify-content-between mb-3">
    <button (click)="toggleForm()" class="btn btn-primary">Nuevo Usuario</button>
</div>
<table class="table table-striped table-bordered mt-3">
    <thead class="table-dark">
        <tr>
            <th>#</th>
            <th>Nombre de Usuario</th>
            <th>Roles</th>
            <th *ngIf="muestraAcciones">Acciones</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let usuario of usuarios; let i = index" style="text-align: center;">
            <td>{{ i + 1 }}</td>
            <td>{{ usuario.nombre_usuario }}</td> 
            <td>
<span class="badge bg-secondary">{{ transformarRol(roles[usuario.idRol]) }}</span>>            </td>
            <td *ngIf="muestraAcciones">
                <button class="btn btn-warning btn-sm" (click)="editUsuario(usuario)">Editar</button>
                <button class="btn btn-danger btn-sm" (click)="deleteUsuario(usuario.nombre_usuario)">Eliminar</button>
            </td>
        </tr>  
    </tbody>

</table>
<div *ngIf="showForm" style="margin-top: 20px;">
    <h3>{{ textoModal }}</h3>
    <form [formGroup]="usuarioForm" (ngSubmit)="onSubmit()">
        <input type="hidden" readonly formControlName="nombre_usuario">

      <div class="form-group">
        <label for="nombre">Nombre de usuario</label>
        <input id="nombre" class="form-control" formControlName="nombre" minlength="5" maxlength="20">
      </div>
      <div class="form-group">
        <label for="password">Contraseña</label>
        <input id="password" class="form-control" formControlName="password" minlength="5">
      </div>
      <div class="form-group">
        <label for="rol">Roles</label>
        <select id="rol" class="form-control" formControlName="rol" multiple>
            <option *ngFor="let rol of roles" [value]="rol">{{ transformarRol(rol) }}</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary" [disabled]="usuarioForm.invalid" style="margin-top: 20px;">
        Guardar
      </button>
    </form>
</div>
</div>